<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Pelatihan - Web Development Batch 4</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        secondary: '#475569',
                    }
                }
            }
        }
    </script>
    <style>
        /* Transition classes */
        .step-content { display: none; animation: fadeIn 0.3s ease-out; }
        .step-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Stepper Styles */
        .step-indicator.active .circle { @apply bg-primary text-white border-primary; }
        .step-indicator.active .label { @apply text-primary font-bold; }
        .step-indicator.completed .circle { @apply bg-green-500 text-white border-green-500; }
        .step-indicator.completed .label { @apply text-green-600 font-medium; }
        .step-indicator.pending .circle { @apply bg-white text-gray-400 border-gray-300; }
        .step-indicator.pending .label { @apply text-gray-400; }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 font-sans min-h-screen pb-20">

    <!-- TOP NAV -->
    <div class="bg-white border-b border-gray-200 sticky top-0 z-30">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <a href="#" class="text-gray-400 hover:text-gray-600"><i class="fa-solid fa-arrow-left"></i></a>
                <div>
                    <h1 class="text-lg font-bold text-gray-900">Setup Pelatihan Baru</h1>
                    <p class="text-xs text-gray-500">Web Development: Fullstack Batch 4</p>
                </div>
            </div>
            <div class="flex gap-2">
                <button class="px-4 py-2 text-gray-600 text-sm font-medium hover:bg-gray-50 rounded-lg border border-transparent">Simpan Draft</button>
                <button onclick="alert('Pelatihan Berhasil Dipublish!')" class="px-4 py-2 bg-primary text-white text-sm font-medium hover:bg-blue-700 rounded-lg shadow-sm">Publish Pelatihan</button>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-12 gap-8">

        <!-- LEFT: STEPPER NAVIGATION -->
        <div class="md:col-span-3">
            <nav class="sticky top-24 space-y-1" id="stepperNav">
                <!-- Step 1 -->
                <a href="#" onclick="goToStep(1)" id="nav-step-1" class="step-indicator active group flex items-center px-3 py-2 text-sm">
                    <span class="circle flex-shrink-0 w-8 h-8 flex items-center justify-center border-2 rounded-full mr-3 transition-colors">1</span>
                    <span class="flex-1">
                        <span class="label block">Informasi Dasar</span>
                        <span class="block text-xs text-gray-500 font-normal">Judul, Kuota, Metode</span>
                    </span>
                </a>
                <div class="ml-7 h-6 border-l-2 border-gray-200"></div>

                <!-- Step 2 -->
                <a href="#" onclick="goToStep(2)" id="nav-step-2" class="step-indicator pending group flex items-center px-3 py-2 text-sm">
                    <span class="circle flex-shrink-0 w-8 h-8 flex items-center justify-center border-2 rounded-full mr-3 transition-colors">2</span>
                    <span class="flex-1">
                        <span class="label block">Kurikulum & Sesi</span>
                        <span class="block text-xs text-gray-500 font-normal">Silabus, Materi</span>
                    </span>
                </a>
                <div class="ml-7 h-6 border-l-2 border-gray-200"></div>

                <!-- Step 3 -->
                <a href="#" onclick="goToStep(3)" id="nav-step-3" class="step-indicator pending group flex items-center px-3 py-2 text-sm">
                    <span class="circle flex-shrink-0 w-8 h-8 flex items-center justify-center border-2 rounded-full mr-3 transition-colors">3</span>
                    <span class="flex-1">
                        <span class="label block">Jadwal & Pengajar</span>
                        <span class="block text-xs text-gray-500 font-normal">Plotting Mentor</span>
                    </span>
                </a>
            </nav>
        </div>

        <!-- RIGHT: CONTENT AREA -->
        <div class="md:col-span-9 space-y-6">
            
            <!-- ================= STEP 1: INFORMASI DASAR ================= -->
            <div id="step-1" class="step-content active bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                <h2 class="text-lg font-bold text-gray-900 mb-6 border-b pb-2">Informasi Dasar Pelatihan</h2>
                <div class="space-y-5">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Program Pelatihan</label>
                        <input type="text" value="Web Development: Fullstack Laravel" class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Kategori</label>
                            <select class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">
                                <option>Technology & Coding</option>
                                <option>Digital Marketing</option>
                                <option>Data Science</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Metode Pelaksanaan</label>
                            <select class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">
                                <option>Hybrid (Online & Offline)</option>
                                <option>Online Full</option>
                                <option>Offline Full</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Batch Ke-</label>
                            <input type="number" value="4" class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Kuota Peserta</label>
                            <input type="number" value="50" class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Durasi (Jam)</label>
                            <input type="number" value="48" class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Deskripsi Program</label>
                        <textarea rows="4" class="w-full border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary">Pelatihan intensif untuk mencetak Fullstack Developer menggunakan framework Laravel dan Vue.js.</textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Cover Image</label>
                        <div class="flex items-center justify-center w-full">
                            <label class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100">
                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                    <i class="fa-solid fa-cloud-arrow-up text-gray-400 text-2xl mb-2"></i>
                                    <p class="text-xs text-gray-500">Klik atau drag file gambar di sini</p>
                                </div>
                                <input type="file" class="hidden" />
                            </label>
                        </div>
                    </div>
                </div>
                <div class="mt-8 flex justify-end">
                    <button onclick="goToStep(2)" class="px-6 py-2 bg-primary text-white font-medium rounded-lg hover:bg-blue-700 shadow-sm flex items-center gap-2">
                        Lanjut: Kurikulum <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- ================= STEP 2: KURIKULUM & SESI ================= -->
            <div id="step-2" class="step-content">
                <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg mb-6">
                    <div class="flex">
                        <div class="flex-shrink-0"><i class="fa-solid fa-circle-info text-blue-500"></i></div>
                        <div class="ml-3">
                            <p class="text-sm text-blue-700">Susun struktur pembelajaran. Sesi yang Anda buat di sini akan otomatis muncul di tab "Jadwal" untuk plotting tanggal.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-lg font-bold text-gray-900">Struktur Kurikulum</h2>
                        <button class="text-sm text-blue-600 hover:underline font-medium"><i class="fa-solid fa-upload mr-1"></i> Import Silabus (Excel)</button>
                    </div>

                    <!-- Container Sesi -->
                    <div id="session-container" class="space-y-4">
                        <!-- Sesi 1 (Static) -->
                        <div class="session-item border border-gray-200 rounded-lg overflow-hidden group">
                            <div class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer" onclick="toggleSession(this)">
                                <div class="flex items-center gap-3">
                                    <span class="bg-white border border-gray-300 text-gray-500 text-xs font-bold px-2 py-1 rounded session-number">SESI 1</span>
                                    <h3 class="font-bold text-gray-800 text-sm session-title-display">Pengenalan HTML & Struktur Web</h3>
                                </div>
                                <div class="flex items-center gap-3">
                                    <span class="text-xs text-gray-500">3 Jam</span>
                                    <i class="fa-solid fa-chevron-down text-gray-400 transition-transform group-[.open]:rotate-180"></i>
                                </div>
                            </div>
                            <div class="p-4 bg-white border-t border-gray-200 hidden">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Topik Pembahasan</label>
                                        <input type="text" value="Pengenalan HTML & Struktur Web" class="w-full border-gray-300 rounded-md text-sm focus:ring-primary focus:border-primary" oninput="updateSessionTitle(this)">
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-gray-700 mb-1">Metode</label>
                                        <select class="w-full border-gray-300 rounded-md text-sm focus:ring-primary focus:border-primary">
                                            <option>Teori & Praktek</option>
                                            <option>Full Praktek</option>
                                            <option>Ujian</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4 pt-2 border-t border-gray-100">
                                    <button class="text-xs text-gray-600 hover:text-primary flex items-center gap-1"><i class="fa-solid fa-file-pdf"></i> Upload Modul</button>
                                    <button class="text-xs text-gray-600 hover:text-primary flex items-center gap-1"><i class="fa-solid fa-link"></i> Link Video</button>
                                    <button onclick="removeSession(this)" class="ml-auto text-xs text-red-500 hover:text-red-700"><i class="fa-solid fa-trash mr-1"></i> Hapus Sesi</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Add New Button -->
                    <button onclick="addSession()" class="w-full py-3 mt-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-primary hover:text-primary hover:bg-blue-50 transition-all flex items-center justify-center gap-2 text-sm font-medium">
                        <i class="fa-solid fa-plus"></i> Tambah Sesi Pertemuan
                    </button>
                </div>

                <!-- Navigation -->
                <div class="flex justify-between pt-4">
                    <button onclick="goToStep(1)" class="px-6 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50">Kembali</button>
                    <button onclick="goToStep(3)" class="px-6 py-2 bg-primary text-white font-medium rounded-lg hover:bg-blue-700 shadow-sm flex items-center gap-2">
                        Lanjut: Jadwal & Pengajar <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- ================= STEP 3: JADWAL & PENGAJAR ================= -->
            <div id="step-3" class="step-content">
                <div class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm">
                    <h2 class="text-lg font-bold text-gray-900 mb-2">Plotting Jadwal & Pengajar</h2>
                    <p class="text-sm text-gray-500 mb-6">Tentukan tanggal dan siapa yang akan mengajar untuk setiap sesi yang telah dibuat.</p>

                    <div class="overflow-x-auto border border-gray-200 rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16">Sesi</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Topik (Dari Step 2)</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48">Tanggal & Jam</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48">Instruktur</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="schedule-table-body">
                                <!-- Data will be populated by JS based on Step 2 -->
                                <tr>
                                    <td class="px-4 py-3 text-sm font-bold text-gray-500 text-center">1</td>
                                    <td class="px-4 py-3 text-sm font-medium text-gray-900">Pengenalan HTML & Struktur Web</td>
                                    <td class="px-4 py-3">
                                        <input type="datetime-local" class="w-full border-gray-300 rounded text-xs focus:ring-primary focus:border-primary">
                                    </td>
                                    <td class="px-4 py-3">
                                        <select class="w-full border-gray-300 rounded text-xs focus:ring-primary focus:border-primary">
                                            <option>Pilih Mentor...</option>
                                            <option>Budi Santoso</option>
                                            <option>Siti Aminah</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4 p-3 bg-gray-50 rounded border border-gray-200 flex items-center gap-2 text-sm text-gray-600">
                        <i class="fa-solid fa-lightbulb text-yellow-500"></i>
                        <span>Tips: Gunakan fitur "Auto-Generate Schedule" untuk mengisi tanggal otomatis (setiap Senin & Kamis).</span>
                        <button class="ml-auto text-primary font-bold text-xs hover:underline">Auto-Generate</button>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="flex justify-between pt-4">
                    <button onclick="goToStep(2)" class="px-6 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50">Kembali</button>
                    <button onclick="alert('Pelatihan Siap Dipublish!')" class="px-6 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 shadow-sm flex items-center gap-2">
                        <i class="fa-solid fa-check"></i> Selesai & Publish
                    </button>
                </div>
            </div>

        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // STEP NAVIGATION LOGIC
        function goToStep(stepNum) {
            // 1. Update Content Visibility
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.getElementById('step-' + stepNum).classList.add('active');

            // 2. Update Stepper UI (Sidebar)
            for (let i = 1; i <= 3; i++) {
                const navItem = document.getElementById('nav-step-' + i);
                const circle = navItem.querySelector('.circle');
                
                // Reset classes
                navItem.className = 'group flex items-center px-3 py-2 text-sm step-indicator';
                circle.innerHTML = i; // Default number

                if (i < stepNum) {
                    // Completed Steps
                    navItem.classList.add('completed');
                    circle.innerHTML = '<i class="fa-solid fa-check"></i>';
                } else if (i === stepNum) {
                    // Active Step
                    navItem.classList.add('active');
                } else {
                    // Pending Steps
                    navItem.classList.add('pending');
                }
            }

            // 3. If going to Step 3, refresh table based on Step 2 data
            if (stepNum === 3) {
                refreshScheduleTable();
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // SESSION MANAGEMENT LOGIC (STEP 2)
        function addSession() {
            const container = document.getElementById('session-container');
            const count = container.children.length + 1;
            
            const newSessionHTML = `
                <div class="session-item border border-gray-200 rounded-lg overflow-hidden group">
                    <div class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer" onclick="toggleSession(this)">
                        <div class="flex items-center gap-3">
                            <span class="bg-white border border-gray-300 text-gray-500 text-xs font-bold px-2 py-1 rounded session-number">SESI ${count}</span>
                            <h3 class="font-bold text-gray-800 text-sm session-title-display">Topik Baru</h3>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-xs text-gray-500">3 Jam</span>
                            <i class="fa-solid fa-chevron-down text-gray-400 transition-transform group-[.open]:rotate-180"></i>
                        </div>
                    </div>
                    <div class="p-4 bg-white border-t border-gray-200 hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">Topik Pembahasan</label>
                                <input type="text" placeholder="Masukkan topik..." class="w-full border-gray-300 rounded-md text-sm focus:ring-primary focus:border-primary" oninput="updateSessionTitle(this)">
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">Metode</label>
                                <select class="w-full border-gray-300 rounded-md text-sm focus:ring-primary focus:border-primary">
                                    <option>Teori & Praktek</option>
                                    <option>Full Praktek</option>
                                    <option>Ujian</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 pt-2 border-t border-gray-100">
                            <button class="text-xs text-gray-600 hover:text-primary flex items-center gap-1"><i class="fa-solid fa-file-pdf"></i> Upload Modul</button>
                            <button class="text-xs text-gray-600 hover:text-primary flex items-center gap-1"><i class="fa-solid fa-link"></i> Link Video</button>
                            <button onclick="removeSession(this)" class="ml-auto text-xs text-red-500 hover:text-red-700"><i class="fa-solid fa-trash mr-1"></i> Hapus Sesi</button>
                        </div>
                    </div>
                </div>
            `;
            
            // Append new session
            const div = document.createElement('div');
            div.innerHTML = newSessionHTML;
            container.appendChild(div.firstElementChild);
            
            // Open the new session automatically
            const newCard = container.lastElementChild;
            toggleSession(newCard.querySelector('.cursor-pointer'));
        }

        function removeSession(btn) {
            if(confirm('Hapus sesi ini?')) {
                btn.closest('.session-item').remove();
                renumberSessions();
            }
        }

        function toggleSession(header) {
            const content = header.nextElementSibling;
            const parent = header.parentElement;
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                parent.classList.add('open');
            } else {
                content.classList.add('hidden');
                parent.classList.remove('open');
            }
        }

        function updateSessionTitle(input) {
            const titleDisplay = input.closest('.session-item').querySelector('.session-title-display');
            titleDisplay.textContent = input.value || 'Topik Baru';
        }

        function renumberSessions() {
            const sessions = document.querySelectorAll('.session-item');
            sessions.forEach((item, index) => {
                item.querySelector('.session-number').textContent = `SESI ${index + 1}`;
            });
        }

        // SCHEDULE TABLE LOGIC (STEP 3)
        function refreshScheduleTable() {
            const tbody = document.getElementById('schedule-table-body');
            tbody.innerHTML = ''; // Clear current
            
            const sessionInputs = document.querySelectorAll('.session-item');
            
            if(sessionInputs.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" class="p-4 text-center text-gray-500 text-sm">Belum ada sesi yang dibuat di Step 2.</td></tr>';
                return;
            }

            sessionInputs.forEach((item, index) => {
                const topic = item.querySelector('input[type="text"]').value || 'Topik Baru';
                const row = `
                    <tr>
                        <td class="px-4 py-3 text-sm font-bold text-gray-500 text-center">${index + 1}</td>
                        <td class="px-4 py-3 text-sm font-medium text-gray-900">${topic}</td>
                        <td class="px-4 py-3">
                            <input type="datetime-local" class="w-full border-gray-300 rounded text-xs focus:ring-primary focus:border-primary">
                        </td>
                        <td class="px-4 py-3">
                            <select class="w-full border-gray-300 rounded text-xs focus:ring-primary focus:border-primary">
                                <option>Pilih Mentor...</option>
                                <option>Budi Santoso</option>
                                <option>Siti Aminah</option>
                                <option>Andi Wijaya</option>
                            </select>
                        </td>
                    </tr>
                `;
                tbody.insertAdjacentHTML('beforeend', row);
            });
        }
    </script>
</body>
</html>